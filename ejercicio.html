<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ejercicio</title>
<link rel="stylesheet" href="css/ejercicio.css">
</head>
<body>
<div class="header-container">
  <div id="user-header">
    <span id="user-greeting"></span>
    <button id="logout-btn">Cerrar SesiÃ³n</button>
  </div>
</div>

<div class="main-container">
  <h1 id="tituloPrincipal"></h1>
  <div id="fecha"></div>
  <div id="tituloEjercicio" style="color: #00c3ff;"></div>
  
  <!-- CronÃ³metro Global de la SesiÃ³n -->
  <div id="global-timer-container" style="background: #25272a; padding: 10px; border-radius: 8px; margin: 10px auto; text-align: center; border: 1px solid #4f545c; max-width: 300px;">
    <div style="font-size: 0.85em; color: #aaa; margin-bottom: 5px;">â±ï¸ Tiempo Total SesiÃ³n</div>
    <span id="global-workout-time" style="font-size: 1.4em; color: #00c3ff; font-weight: bold; display: block; margin-bottom: 5px;">00:00:00</span>
    <button id="btn-init-timer" style="background: linear-gradient(45deg, #ffc107, #ff9800); color: black; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-weight: bold; font-size: 0.9em;">â–¶ / â†» Iniciar</button>
  </div>

  <div id="tiempo-ejercicio" style="text-align: center; margin-bottom: 15px; font-style: italic; color: #ffc107;"></div>
  <div id="videoEjercicio"></div>

  <table>
    <thead id="thead"></thead>
    <tbody id="tbody"></tbody>
    <tfoot id="tfoot"></tfoot>
  </table>

  <!-- GrÃ¡fica con botÃ³n -->
  <div id="grafica-container" style="background: #3a3f44;">
    <div id="grafica-wrapper" style="position: relative;">
      <button id="toggleVista" class="btn-filtro" style="position: absolute; top: 10px; left: 15px; z-index: 10;">ğŸ“ˆ HistÃ³rico</button>
      <!-- Leyenda HTML personalizada -->
      <div id="grafica-leyenda" style="position: absolute; top: 10px; left: 50%; transform: translateX(-50%); z-index: 10; display: flex; gap: 15px;">
        <div class="leyenda-item" data-dataset-index="0">
          <span class="leyenda-color" style="background-color: blue;"></span>
          <span class="leyenda-texto">Peso (kg)</span>
        </div>
        <div class="leyenda-item" data-dataset-index="1">
          <span class="leyenda-color" style="background-color: orange;"></span>
          <span class="leyenda-texto">Repeticiones</span>
        </div>
      </div>
      <canvas id="graficaProgreso" style="padding: 0 15px 15px 15px;"></canvas>
    </div>
  </div>

  <div id="formulario">
    <input type="number" id="peso" placeholder="Peso (kg)">
    <input type="number" id="reps" placeholder="Repeticiones">
    <button id="guardar">Guardar</button>
  </div>

  <div class="botones-footer">
    <a id="volverEjercicios" class="boton-volver ejercicios" href="#"><i>â†©ï¸</i> Volver a Ejercicios</a>
    <a id="volverRutinas" class="boton-volver rutinas" href="#"><i>ğŸ </i> Volver a Rutinas</a>
  </div>
</div>

<div id="toast">âœ… Datos guardados</div>

<!-- Modal para ver imagen de mÃ¡quina -->
<div id="modal-maquina-view" class="modal-overlay">
  <div class="modal-content">
    <span class="close-modal">&times;</span>
    <h3 style="color: #0095ff; margin-top: 0;">ğŸ‹ï¸ MÃ¡quina</h3>
    <img id="machine-image-view" src="" alt="MÃ¡quina" style="width: 100%; height: auto; border-radius: 8px; max-height: 70vh; object-fit: contain;">
  </div>
</div>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script> 

<script type="module" src="js/ejercicio.js"></script>

</body>
</html>
